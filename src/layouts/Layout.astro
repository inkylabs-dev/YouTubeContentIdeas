---
import '../styles/globals.css';
import { Seo } from 'astro-seo-meta';

export interface Props {
  title: string;
  description?: string;
  image?: string;
  article?: boolean;
  publishedTime?: string;
  modifiedTime?: string;
  author?: string;
  tags?: string[];
}

const { 
  title, 
  description = "Discover trending YouTube content ideas for creators. Browse curated video ideas across multiple niches to grow your channel and engage your audience.",
  image = "https://youtubecontentideas.com/banner-image.png",
  article = false,
  publishedTime,
  modifiedTime,
  author = "YouTube Content Ideas",
  tags = ["YouTube content ideas", "YouTube video ideas", "YouTube creators", "content creation", "trending videos", "viral content"]
} = Astro.props;

const canonicalUrl = `https://youtubecontentideas.com${Astro.url.pathname}`;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">

    <Seo
      title={title}
      description={description}
      canonical={canonicalUrl}
      openGraph={{
        basic: {
          title,
          type: article ? 'article' : 'website',
          image,
          url: canonicalUrl
        },
        optional: {
          description,
          siteName: 'YouTube Content Ideas',
          locale: 'en_US'
        },
        article: article ? {
          publishedTime,
          modifiedTime,
          author: [author],
          tags
        } : undefined
      }}
      twitter={{
        creator: '@InkyLabsDev',
        site: '@InkyLabsDev',
        card: 'summary_large_image'
      }}
      extend={{
        link: [
          { rel: 'icon', type: 'image/svg+xml', href: '/favicon.svg' },
          { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },
          { rel: 'shortcut icon', href: '/favicon.ico' }
        ],
        meta: [
          { name: 'keywords', content: tags.join(', ') },
          { name: 'author', content: author },
          { name: 'robots', content: 'index, follow' },
          { name: 'theme-color', content: '#000000' },
          { name: 'msapplication-TileColor', content: '#000000' }
        ]
      }}
    />
    {process.env.NODE_ENV != "production" ? (
      <script type="module">
    import RefreshRuntime from '/@react-refresh'
    RefreshRuntime.injectIntoGlobalHook(window)
    window.$RefreshReg$ = () => {}
    window.$RefreshSig$ = () => (type) => type
    window.__vite_plugin_react_preamble_installed__ = true
</script>
    ): ""}
    
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "YouTube Content Ideas",
        "description": "Discover trending YouTube content ideas across 60+ niches for creators",
        "url": "https://youtubecontentideas.com/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://youtubecontentideas.com/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>
  </head>
  <body class="min-h-screen bg-background font-sans antialiased">
    <slot />
    <!-- Google tag (gtag.js) -->
    {process.env.NODE_ENV === "production" ? (
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-95233EEB10"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-95233EEB10');
      </script>
    ) : (
      ""
    )
    }
    
    <script>
      // Handle smooth scrolling with navbar offset
      document.addEventListener('DOMContentLoaded', function() {
        // Handle anchor links that start with #
        function handleAnchorClick(event) {
          const href = event.target.getAttribute('href');
          if (href && href.startsWith('#')) {
            event.preventDefault();
            const targetId = href.substring(1);
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
              const navbarHeight = 64; // h-16 = 4rem = 64px
              const elementPosition = targetElement.offsetTop - navbarHeight;
              window.scrollTo({ top: elementPosition, behavior: 'smooth' });
            }
          }
        }
        
        // Handle URLs with hash fragments (like /#start-brainstorming)
        function handleHashOnLoad() {
          if (window.location.hash) {
            const targetId = window.location.hash.substring(1);
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
              setTimeout(() => {
                const navbarHeight = 64;
                const elementPosition = targetElement.offsetTop - navbarHeight;
                window.scrollTo({ top: elementPosition, behavior: 'smooth' });
              }, 100); // Small delay to ensure page is fully loaded
            }
          }
        }
        
        // Add click listeners to all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(link => {
          link.addEventListener('click', handleAnchorClick);
        });
        
        // Handle hash on page load
        handleHashOnLoad();
      });
    </script>
  </body>
</html>